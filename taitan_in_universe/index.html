<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>クリアページ</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "sans-serif";
      text-align: center;
      color: white;
      background: url("rocket.jpg") no-repeat center center fixed;
      background-size: cover;
    }
    .overlay {
      background: rgba(0, 0, 0, 0.5);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 30px;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }
    p.story {
      max-width: 600px;
      margin: 20px auto;
      line-height: 1.8;
    }
    .survey {
      margin: 30px 0;
      width: 100%;
      max-width: 700px;
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 10px;
    }
    iframe {
      width: 100%;
      height: 600px; /* フォームの長さに合わせて調整 */
      border: none;
    }
    .twitter {
      margin-top: 20px;
    }
    .twitter a {
      display: inline-block;
      background: #1da1f2;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="overlay">
    <h1>おめでとう！</br>全ての謎を解き明かした！</h1>

    <div class="survey">
      <h2>アンケート</h2>
      <!-- Googleフォームの埋め込みコードをここに差し替え -->
      <iframe src="https://forms.gle/CR3M2t1gTZVyFqNv8">
        読み込んでいます…
      </iframe>
    </div>

    <div class="twitter">
      <a href="https://twitter.com/intent/tweet?text=謎をすべて解き明かして、タイタンを宇宙に帰還させた！🚀 #謎解き"
         target="_blank">Twitterでシェアする</a>
    </div>
  </div>
  <script>
    function generateUUIDv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
  );
}
function sendToDiscord(message){
  const webhookUrl = "https://discord.com/api/webhooks/1415138932806520852/gFDnpTbK2Me4NfL0lZfWZSCTtmsnpn87_eq2OFu6XlYNHmI7YBJdOpAbhTwo8a_1BqWk";
  let playerId = localStorage.getItem("playerId");

  if (!playerId) {
    playerId = generateUUIDv4();
    localStorage.setItem("playerId", playerId);  
  }

    fetch(webhookUrl, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        content: message+"\n playerID:"+playerId
      })
    })
    .then(response => {
      if (response.ok) {
        // alert("✅ メッセージを送信しました！");
      } else {
        // alert("❌ エラーが発生しました: " + response.status);
      }
    })
    .catch(error => {
      console.error("通信エラー:", error);
      // alert("❌ 通信エラーが発生しました");
    });
}
  </script>
</body>
</html>
